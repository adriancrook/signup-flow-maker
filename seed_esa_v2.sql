[dotenv@17.2.3] injecting env (2) from .env.local -- tip: ⚙️  suppress all logs with { quiet: true }
-- SQL Seed for educator-school-admin
-- Flow: Educator School Admin
DO $$
DECLARE
  org_id uuid;
  profile_id uuid;
  new_flow_id uuid;
  version_id uuid;
BEGIN
  -- Get IDs
  SELECT id INTO org_id FROM organizations WHERE slug = 'teaching-com';
  SELECT id INTO profile_id FROM profiles WHERE organization_id = org_id LIMIT 1;

  -- Insert Flow
  INSERT INTO flows (organization_id, name, description, created_by)
  VALUES (org_id, 'Educator School Admin', 'Imported from Blueprint', profile_id)
  RETURNING id INTO new_flow_id;

  -- Insert Version
  INSERT INTO flow_versions (flow_id, version_name, data, created_by)
  VALUES (new_flow_id, 'Initial Seed', '{"nodes":[{"id":"1atIE0NPN-W_Ai7IKCeYZ","type":"MC","position":{"x":0,"y":0},"data":{"screen":{"id":"1atIE0NPN-W_Ai7IKCeYZ","type":"MC","title":"Who are you?","question":"I am a...","options":[{"id":"opt-tch","label":"Teacher","value":"teacher"},{"id":"opt-sch","label":"School Admin","value":"school-admin"},{"id":"opt-dst","label":"District Admin","value":"district-admin"}],"variableBinding":"role"},"label":"Educator Gatekeeper","code":"MC-GATEKEEPER-EDU","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"EKHUUh62ZK42QWafCaO-6","type":"MSG","position":{"x":360,"y":0},"data":{"screen":{"id":"EKHUUh62ZK42QWafCaO-6","type":"MSG","title":"Social Proof","style":"overlay","copy":"You are joining 50 million users who trust Typing.com.","headline":"Great choice!"},"label":"Social Proof","code":"MSG-SOCIAL-PROOF","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"ZcCCpN8RvslYtKBDnCPe_","type":"MC","position":{"x":720,"y":0},"data":{"screen":{"id":"ZcCCpN8RvslYtKBDnCPe_","type":"MC","title":"Confirm Location","question":"We detected you''re in [Detected State]. Is this correct?","options":[{"id":"opt-yes","label":"Yes","value":"yes"},{"id":"opt-no","label":"No, I''m in ___","value":"no"}],"variableBinding":"state"},"label":"Confirm Location","code":"MC-LOCATION-EDU","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"t4laD_SOjSPmPLH1Je4vJ","type":"NUM","position":{"x":1080,"y":0},"data":{"screen":{"id":"t4laD_SOjSPmPLH1Je4vJ","type":"NUM","title":"Student Count","prompt":"How many students do you teach?","placeholder":"e.g. 25","inputType":"number","variableBinding":"studentCount"},"label":"Student Count","code":"NUM-STUDENTS","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"-5DSWvqygl6WTUZU260iy","type":"MSG","position":{"x":0,"y":320},"data":{"screen":{"id":"-5DSWvqygl6WTUZU260iy","type":"MSG","title":"Scalability","headline":"Scalable.","copy":"Our platform is optimized to handle high-volume traffic for schools your size.","style":"standard"},"label":"Affirmation: School Size","code":"MSG-SCHOOLSIZE-SCH-AFF","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"7uz-71PM1OrO21l37RKMa","type":"MC","position":{"x":360,"y":320},"data":{"screen":{"id":"7uz-71PM1OrO21l37RKMa","type":"MC","title":"Rostering","question":"How do you want your students to log in?","options":[{"id":"opt-google","label":"Google/Microsoft","value":"google"},{"id":"opt-clever","label":"Clever","value":"clever"},{"id":"opt-class","label":"Class Code","value":"manual"}],"variableBinding":"rosteringMethod"},"label":"Rostering","code":"MC-ROSTERING","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"1Ko2gPQAm4WNDAgCXbGGD","type":"MSG","position":{"x":720,"y":320},"data":{"screen":{"id":"1Ko2gPQAm4WNDAgCXbGGD","type":"MSG","title":"Infrastructure","headline":"Great.","copy":"We support Single Sign-On (SSO) to make school-wide deployment instant.","style":"standard"},"label":"Affirmation: Rostering (School)","code":"MSG-ROSTERING-SCH-AFF","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"j5fCPAywBMVIYH6ERiPy-","type":"MC","position":{"x":1080,"y":320},"data":{"screen":{"id":"j5fCPAywBMVIYH6ERiPy-","type":"MC","title":"Environment","question":"How important is removing ads?","options":[{"id":"opt-very","label":"Very Important","value":"very"},{"id":"opt-some","label":"Somewhat","value":"somewhat"},{"id":"opt-not","label":"Not a Priority","value":"none"}],"variableBinding":"adImportance"},"label":"Ads Concern","code":"MC-ENVIRONMENT","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"TyRj1h0YCRjyKVTSptHPA","type":"MSG","position":{"x":0,"y":640},"data":{"screen":{"id":"TyRj1h0YCRjyKVTSptHPA","type":"MSG","title":"Walled Garden","headline":"We hear you.","copy":"That''s why PLUS creates a 100%% Ad-Free, Walled Garden environment to minimize risk.","style":"standard"},"label":"Affirmation: Environment (School)","code":"MSG-ENVIRONMENT-SCH-AFF","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"fJyGPFZJNEURyOJJJ1lzl","type":"MC","position":{"x":360,"y":640},"data":{"screen":{"id":"fJyGPFZJNEURyOJJJ1lzl","type":"MC","title":"Data Retention","question":"Do you need to track growth year-over-year?","options":[{"id":"opt-yes","label":"Yes","value":"yes"},{"id":"opt-no","label":"No","value":"no"}],"variableBinding":"dataRetention"},"label":"Data Retention","code":"MC-RETENTION","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"sUIzAkJsROA_oq4-vGJzp","type":"MSG","position":{"x":720,"y":640},"data":{"screen":{"id":"sUIzAkJsROA_oq4-vGJzp","type":"MSG","title":"Unlimited History","headline":"Noted.","copy":"We will enable Unlimited Data Retention for your account (removing the standard 70-day limit).","style":"standard"},"label":"Affirmation: Retention","code":"MSG-RETENTION-SCH-AFF","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"YL7keD45KdlW_g1jv_zr3","type":"MC","position":{"x":1080,"y":640},"data":{"screen":{"id":"YL7keD45KdlW_g1jv_zr3","type":"MC","title":"Analytics","question":"Do you need ROI reporting?","options":[{"id":"opt-yes","label":"Yes","value":"yes"},{"id":"opt-no","label":"No","value":"no"}],"variableBinding":"analytics"},"label":"Analytics / ROI","code":"MC-ANALYTICS","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"YHxZxgR5UqzKkEzEzwrw7","type":"MSG","position":{"x":0,"y":960},"data":{"screen":{"id":"YHxZxgR5UqzKkEzEzwrw7","type":"MSG","title":"Admin Console","headline":"Visible ROI.","copy":"Our Admin Console provides analytics to prove utilization and ROI.","style":"standard"},"label":"Affirmation: Analytics","code":"MSG-ANALYTICS-SCH-AFF","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"ctL6Q3iIm6A704BQk6vge","type":"MC","position":{"x":360,"y":960},"data":{"screen":{"id":"ctL6Q3iIm6A704BQk6vge","type":"MC","title":"Dual Role","question":"Do you also teach your own classes?","options":[{"id":"opt-yes","label":"Yes","value":"yes","nextScreenId":"MmInwgRkvb_USzuB_JeP6"},{"id":"opt-no","label":"No","value":"no","nextScreenId":"CODE:MC-DISCOVERY-EDU"}],"variableBinding":"dualRole"},"label":"Dual Role","code":"MC-DUALROLE-EDU","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"MmInwgRkvb_USzuB_JeP6","type":"MSG","position":{"x":720,"y":960},"data":{"screen":{"id":"MmInwgRkvb_USzuB_JeP6","type":"MSG","title":"The Solution","headline":"Perfect.","copy":"You won''t need two accounts. Our Role Switcher lets you toggle instantly between District/School Oversight and Classroom Instruction.","style":"standard"},"label":"Affirmation: Dual Role","code":"MSG-DUALROLE-AFF","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"3xe8sD2Igf72X0v69gpDY","type":"MS","position":{"x":1080,"y":960},"data":{"screen":{"id":"3xe8sD2Igf72X0v69gpDY","type":"MS","title":"Teacher Content Needs","question":"For your own students, are you looking to teach skills beyond basic typing?","options":[{"id":"opt-coding","label":"Coding Basics","value":"coding"},{"id":"opt-digcit","label":"Digital Citizenship","value":"digcit"},{"id":"opt-typing","label":"Just Typing","value":"typing"}],"variableBinding":"teacherContent"},"label":"Question: Teacher Content (Dual)","code":"MS-CONTENT-TCH-DUAL","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"XK74caqcO4pR37m9wHEj6","type":"MSG","position":{"x":0,"y":1280},"data":{"screen":{"id":"XK74caqcO4pR37m9wHEj6","type":"MSG","title":"Dual Access","headline":"Curriculum Unlocked.","copy":"Your account includes full access to the PLUS Curriculum for your students, while maintaining admin privileges.","style":"standard"},"label":"Affirmation: Teacher Content (Dual)","code":"MSG-TEACHERCONTENT-AFF","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"NCl-ryj_1HrKGgP6jwL57","type":"MC","position":{"x":360,"y":1280},"data":{"screen":{"id":"NCl-ryj_1HrKGgP6jwL57","type":"MC","title":"Teacher Accessibility","question":"Do the students in your specific classes need accessibility accommodations?","options":[{"id":"opt-yes","label":"Yes, I have specific needs","value":"yes"},{"id":"opt-no","label":"No, standard is fine","value":"no"}],"variableBinding":"teacherAccessibility"},"label":"Question: Teacher Accessibility (Dual)","code":"MC-ACCESSIBILITY-TCH-DUAL","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"rXFp_oErCrYBuhl8qPwlq","type":"MSG","position":{"x":720,"y":1280},"data":{"screen":{"id":"rXFp_oErCrYBuhl8qPwlq","type":"MSG","title":"Granular Control","headline":"We''ve got you covered.","copy":"You can apply specific accessibility settings to your own roster without altering global settings.","style":"standard"},"label":"Affirmation: Teacher Access (Dual)","code":"MSG-TEACHERACCESS-AFF","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"k2m3nrrXylvu7Zscrx5eK","type":"MC","position":{"x":1080,"y":1280},"data":{"screen":{"id":"k2m3nrrXylvu7Zscrx5eK","type":"MC","title":"Discovery","question":"How did you hear about us?","options":[{"id":"opt-search","label":"Search Engine","value":"search"},{"id":"opt-social","label":"Social Media","value":"social"},{"id":"opt-friend","label":"Friend/Colleague","value":"friend"}],"variableBinding":"discoverySource","variants":{"student":{"options":[{"id":"opt-teacher","label":"Teacher","value":"teacher"},{"id":"opt-friend","label":"Friend/Classmate","value":"friend"},{"id":"opt-social","label":"Social Media","value":"social"},{"id":"opt-search","label":"Search Engine","value":"search"}]},"parent":{"options":[{"id":"opt-teacher","label":"Teacher","value":"teacher"},{"id":"opt-friend","label":"Friend/Classmate","value":"friend"},{"id":"opt-social","label":"Social Media","value":"social"},{"id":"opt-search","label":"Search Engine","value":"search"}]},"adult":{"options":[{"id":"opt-coworker","label":"Coworker","value":"coworker"},{"id":"opt-friend","label":"Friend","value":"friend"},{"id":"opt-social","label":"Social Media","value":"social"},{"id":"opt-search","label":"Search Engine","value":"search"}]},"teacher":{"options":[{"id":"opt-colleague","label":"Colleague","value":"colleague"},{"id":"opt-conf","label":"Conference/PD","value":"conference"},{"id":"opt-social","label":"Social Media","value":"social"},{"id":"opt-search","label":"Search Engine","value":"search"},{"id":"opt-dist","label":"District Recommendation","value":"district"}]},"school-admin":{"options":[{"id":"opt-colleague","label":"Colleague","value":"colleague"},{"id":"opt-conf","label":"Conference/PD","value":"conference"},{"id":"opt-social","label":"Social Media","value":"social"},{"id":"opt-search","label":"Search Engine","value":"search"},{"id":"opt-dist","label":"District Recommendation","value":"district"}]},"district-admin":{"options":[{"id":"opt-colleague","label":"Colleague","value":"colleague"},{"id":"opt-conf","label":"Conference/PD","value":"conference"},{"id":"opt-social","label":"Social Media","value":"social"},{"id":"opt-search","label":"Search Engine","value":"search"},{"id":"opt-dist","label":"District Recommendation","value":"district"}]}}},"label":"Discovery","code":"MC-DISCOVERY","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"IVdfTvrSrKPsMzBfl6A6K","type":"INT","position":{"x":0,"y":1600},"data":{"screen":{"id":"IVdfTvrSrKPsMzBfl6A6K","type":"INT","title":"Plan Analysis","headline":"Building Your Plan...","duration":3000,"animation":"progress-bar","messages":[{"text":"Analyzing inputs..."},{"text":"Generating curriculum..."},{"text":"Finalizing..."}],"variants":{"student":{"headline":"Building Your Plan...","messages":[{"text":"Measuring your baseline..."},{"text":"Setting target speed..."},{"text":"Optimizing curriculum..."}]},"parent":{"headline":"Building Plan...","messages":[{"text":"Assessing typing level..."},{"text":"Calibrating tech literacy modules..."},{"text":"Addressing screen time concerns..."}]},"adult":{"headline":"Building Your Plan...","messages":[{"text":"Optimizing for your goal..."},{"text":"Tackling your barriers..."},{"text":"Finalizing roadmap..."}]},"teacher":{"headline":"Building Classroom Plan...","messages":[{"text":"Confirming standards alignment..."},{"text":"Loading curriculum..."},{"text":"Configuring rostering..."}]},"school-admin":{"headline":"Building School Plan...","messages":[{"text":"Scaling for student count..."},{"text":"Securing environment..."},{"text":"Enabling data retention..."}]},"district-admin":{"headline":"Building District Plan...","messages":[{"text":"Mapping schools to dashboard..."},{"text":"Verifying rostering protocols..."},{"text":"Preparing compliance docs..."}]}}},"label":"Plan Analysis","code":"INT-PLAN-ANALYSIS","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"1W_374WtDDhyakKh2y5PN","type":"FORM","position":{"x":360,"y":1600},"data":{"screen":{"id":"1W_374WtDDhyakKh2y5PN","type":"FORM","title":"Create Account","headline":"Your Plan is Ready","copy":"Create details to save your plan.","collectFields":["email","password"],"showSocialLogin":true,"variants":{"student":{"headline":"Your customized typing plan is ready!","copy":"We''ve built a roadmap to help you reach your goal."},"parent":{"headline":"Save your child''s custom plan","copy":"We''ve generated your child''s personalized roadmap."},"adult":{"headline":"Your customized typing plan is ready!","copy":"We''ve built a roadmap to help you reach your goal."},"teacher":{"headline":"Your Classroom is Ready.","copy":"Create your free account to save your classroom settings."},"school-admin":{"headline":"Secure Your School''s Learning Environment.","copy":"Create an account to save your school''s data configuration."},"district-admin":{"headline":"Your Compliant District Plan.","copy":"Solve your privacy requirements and rostering infrastructure today."}}},"label":"Signup Form","code":"FORM-SIGNUP","isValid":true,"isSelected":false,"isHighlighted":false}},{"id":"QULn_fta5hNKb9aN-najt","type":"PAY","position":{"x":720,"y":1600},"data":{"screen":{"id":"QULn_fta5hNKb9aN-najt","type":"PAY","title":"PLUS Plan","headline":"Unlock Full Experience","valuePropositions":["Ad-free learning","Unlimited history","Certificates"],"primaryAction":{"label":"Upgrade","action":"upgrade"},"variants":{"student":{"headline":"Unlock the Full Experience","valuePropositions":["Premium Content","Zero Distractions"]},"parent":{"headline":"Unlock the Full Experience for [Child Name]","valuePropositions":["Premium Content","Zero Distractions"]},"adult":{"headline":"Your Typing.com PLUS plan is ready","valuePropositions":["Ad-free learning","Certificates","Unlimited history"]},"teacher":{"headline":"Unlock the Full Classroom Experience","valuePropositions":["Full Coding Curriculum","Ad-free environment","Student progress tracking"]},"school-admin":{"headline":"Your School''s Ad-Free Quote","valuePropositions":["100%% Ad-Free Walled Garden","Unlimited Data Retention","School-wide SSO"]},"district-admin":{"headline":"Your District Implementation Roadmap","valuePropositions":["100%% Ad-Free Walled Garden","Signed DPA Compliance","District Master Dashboard"]}}},"label":"Plus Paywall","code":"PAY-PLUS","isValid":true,"isSelected":false,"isHighlighted":false}}],"edges":[{"id":"e-1atIE0NPN-W_Ai7IKCeYZ-EKHUUh62ZK42QWafCaO-6","source":"1atIE0NPN-W_Ai7IKCeYZ","target":"EKHUUh62ZK42QWafCaO-6","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-EKHUUh62ZK42QWafCaO-6-ZcCCpN8RvslYtKBDnCPe_","source":"EKHUUh62ZK42QWafCaO-6","target":"ZcCCpN8RvslYtKBDnCPe_","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-ZcCCpN8RvslYtKBDnCPe_-t4laD_SOjSPmPLH1Je4vJ","source":"ZcCCpN8RvslYtKBDnCPe_","target":"t4laD_SOjSPmPLH1Je4vJ","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-t4laD_SOjSPmPLH1Je4vJ--5DSWvqygl6WTUZU260iy","source":"t4laD_SOjSPmPLH1Je4vJ","target":"-5DSWvqygl6WTUZU260iy","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e--5DSWvqygl6WTUZU260iy-7uz-71PM1OrO21l37RKMa","source":"-5DSWvqygl6WTUZU260iy","target":"7uz-71PM1OrO21l37RKMa","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-7uz-71PM1OrO21l37RKMa-1Ko2gPQAm4WNDAgCXbGGD","source":"7uz-71PM1OrO21l37RKMa","target":"1Ko2gPQAm4WNDAgCXbGGD","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-1Ko2gPQAm4WNDAgCXbGGD-j5fCPAywBMVIYH6ERiPy-","source":"1Ko2gPQAm4WNDAgCXbGGD","target":"j5fCPAywBMVIYH6ERiPy-","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-j5fCPAywBMVIYH6ERiPy--TyRj1h0YCRjyKVTSptHPA","source":"j5fCPAywBMVIYH6ERiPy-","target":"TyRj1h0YCRjyKVTSptHPA","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-TyRj1h0YCRjyKVTSptHPA-fJyGPFZJNEURyOJJJ1lzl","source":"TyRj1h0YCRjyKVTSptHPA","target":"fJyGPFZJNEURyOJJJ1lzl","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-fJyGPFZJNEURyOJJJ1lzl-sUIzAkJsROA_oq4-vGJzp","source":"fJyGPFZJNEURyOJJJ1lzl","target":"sUIzAkJsROA_oq4-vGJzp","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-sUIzAkJsROA_oq4-vGJzp-YL7keD45KdlW_g1jv_zr3","source":"sUIzAkJsROA_oq4-vGJzp","target":"YL7keD45KdlW_g1jv_zr3","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-YL7keD45KdlW_g1jv_zr3-YHxZxgR5UqzKkEzEzwrw7","source":"YL7keD45KdlW_g1jv_zr3","target":"YHxZxgR5UqzKkEzEzwrw7","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-YHxZxgR5UqzKkEzEzwrw7-ctL6Q3iIm6A704BQk6vge","source":"YHxZxgR5UqzKkEzEzwrw7","target":"ctL6Q3iIm6A704BQk6vge","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-MmInwgRkvb_USzuB_JeP6-3xe8sD2Igf72X0v69gpDY","source":"MmInwgRkvb_USzuB_JeP6","target":"3xe8sD2Igf72X0v69gpDY","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-3xe8sD2Igf72X0v69gpDY-XK74caqcO4pR37m9wHEj6","source":"3xe8sD2Igf72X0v69gpDY","target":"XK74caqcO4pR37m9wHEj6","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-XK74caqcO4pR37m9wHEj6-NCl-ryj_1HrKGgP6jwL57","source":"XK74caqcO4pR37m9wHEj6","target":"NCl-ryj_1HrKGgP6jwL57","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-NCl-ryj_1HrKGgP6jwL57-rXFp_oErCrYBuhl8qPwlq","source":"NCl-ryj_1HrKGgP6jwL57","target":"rXFp_oErCrYBuhl8qPwlq","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-rXFp_oErCrYBuhl8qPwlq-k2m3nrrXylvu7Zscrx5eK","source":"rXFp_oErCrYBuhl8qPwlq","target":"k2m3nrrXylvu7Zscrx5eK","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-k2m3nrrXylvu7Zscrx5eK-IVdfTvrSrKPsMzBfl6A6K","source":"k2m3nrrXylvu7Zscrx5eK","target":"IVdfTvrSrKPsMzBfl6A6K","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-IVdfTvrSrKPsMzBfl6A6K-1W_374WtDDhyakKh2y5PN","source":"IVdfTvrSrKPsMzBfl6A6K","target":"1W_374WtDDhyakKh2y5PN","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-1W_374WtDDhyakKh2y5PN-QULn_fta5hNKb9aN-najt","source":"1W_374WtDDhyakKh2y5PN","target":"QULn_fta5hNKb9aN-najt","type":"smoothstep","animated":true,"data":{"isDefault":true}},{"id":"e-ctL6Q3iIm6A704BQk6vge-MmInwgRkvb_USzuB_JeP6-opt-yes","source":"ctL6Q3iIm6A704BQk6vge","target":"MmInwgRkvb_USzuB_JeP6","sourceHandle":"opt-yes","type":"smoothstep","animated":true,"label":"Yes","data":{"label":"Yes"}}]}'::jsonb, profile_id)
  RETURNING id INTO version_id;

  -- Update Current
  UPDATE flows SET current_version_id = version_id WHERE id = new_flow_id;
END $$;

